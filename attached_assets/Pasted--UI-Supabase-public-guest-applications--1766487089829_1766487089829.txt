너는 내 웹앱에 “게스트 신청 현황” 게시판(UI 섹션)을 추가하는 개발자야. **목표:** - Supabase 테이블 public.guest_applications 에서 데이터를 가져와 화면에 깔끔한 표(Table) 형태로 보여줘. - 표 컬럼 순서: **이름 | 나이 | 키 | 포지션 | 연락처** - 아래 정의된 “표시용 변환 규칙”을 반드시 적용해서 보여줘. - **핵심 요구사항:** “경기 주차(토요일 00:00 ~ 금요일 21:00 KST)” 기준으로 데이터를 필터링할 수 있는 드롭다운(주차 선택 박스)을 상단에 만들어줘. **사전 조건:** - Replit Secrets에 SUPABASE_URL, SUPABASE_ANON_KEY가 이미 저장되어 있어서 환경변수로 사용 가능해. - 대상 테이블명: public.guest_applications - 테이블 스키마 정보: - id (uuid) - name (text) - age (text) -- 예: "20대" - height (text) -- 예: "170~175cm" - position (text) -- 예: "리딩 가드 1,2번" - phone (text) - applied_at (timestamptz, default now()) -- DB에는 UTC로 저장됨 **⭐⭐ 경기 주차 정의 (가장 중요, KST 한국시간 기준) ⭐⭐** - 한 “주차”의 정의는 **[이번 주 토요일 00:00:00 KST] 부터 [다음 주 금요일 21:00:00 KST] 까지**이다. - 즉, 금요일 21:00:00 이전에 신청하면 그 주차에 포함되고, 21:00:01 이후에 신청하면 다음 주차로 넘어간다. - 예시: 12월 26일(금) 20:55 신청 → [12.20~12.26] 주차 - 예시: 12월 26일(금) 21:05 신청 → [12.27~01.02] 주차 **구현 단계 (이 순서대로 진행해줘):** 1) **환경 확인 및 클라이언트 재사용:** - 현재 프로젝트가 어떤 프레임워크(Next.js, React+Vite 등)인지 확인해. - 기존 코드에 이미 생성된 Supabase 클라이언트(supabaseClient.js/ts 등)가 있다면 그것을 import해서 재사용해. 없다면 새로 만들어야 해. 2) **날짜 계산 유틸리티 구현 (핵심 로직):** - **강력 권장:** 타임존 계산 오류를 방지하기 위해 date-fns와 date-fns-tz (또는 dayjs와 timezone 플러그인) 라이브러리를 사용해서 구현해줘. 순수 JS로 오프셋 계산은 피할 것. - getGameWeekRange(dateObj): 입력받은 날짜 객체(또는 현재시간)가 속한 경기 주차의 시작 시간(KST 토요일 00:00)과 종료 시간(KST 금요일 21:00)을 정확히 계산해서 반환해. - getRecentGameWeeks(n): 위 함수를 활용해 최근 n개(예: 8개) 주차의 범위 배열을 생성해. 드롭다운 옵션으로 사용할 거야. - 옵션 표시용 라벨 예시: "2025-12-20(토) ~ 12-26(금) 21:00" 3) **UI 구성 (드롭다운 + 테이블):** - 컴포넌트 상단에 "주차 선택" 드롭다운(Select)을 만들어. - 기본 선택값은 "현재 시간이 속한 주차"로 자동 설정돼야 해. - 하단에는 데이터를 보여줄 테이블을 배치해. 4) **데이터 Fetching (중요):** - 선택된 주차의 KST 시작/종료 시간을 사용하여 Supabase 데이터를 조회해. - **주의:** Supabase applied_at은 UTC이므로, 쿼리할 때는 계산된 KST 시간을 **반드시 UTC ISO 문자열로 변환**해서 비교해야 해. - .gte('applied_at', startKstInUTC) - .lte('applied_at', endKstInUTC) - 정렬: applied_at 내림차순(DESC) - 로딩 및 에러 상태를 처리해줘. 5) **⭐ 표시용 데이터 변환 (별도 함수 transformGuestData로 분리):** UI 렌더링 직전에 원본 데이터를 아래 규칙대로 변환해. - **나이(age)**: "20대"→25, "30대"→35, "40대"→45, "50대" 이상→50, 그 외는 원본 유지. - **키(height)**: - "170~175cm"처럼 범위면 숫자만 추출해 평균값 계산 후 반올림 (예: 173). - "cm", 공백, "~", "-" 등은 제거. 단일 숫자만 있으면 그대로 사용. - **포지션(position)**: - "가드" 포함 → "가드" - "포워드" 포함 → "포워드" - "센터" 또는 "밑선" 포함 → "센터" - 그 외는 원본 그대로 표시. - **연락처(phone)**: 원본 그대로 표시 (추후 마스킹 예정).